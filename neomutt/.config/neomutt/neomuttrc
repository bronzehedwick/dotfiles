# vim: ft=muttrc

# mail type
set mbox_type = Maildir
set sendmail = /usr/local/bin/msmtp

# account options
source ~/.config/neomutt/mail_accounts
set from = $my_user
set realname = "Chris DeLuca"
set mail_check = 0
set envelope_from
unset move
set delete
unset confirmappend
set quit
set header_cache = ~/.cache/neomutt

# folders
set folder = ~/Mail
set spoolfile = "+INBOX"
set mbox = "+Archive"
set postponed = "+Drafts"
set record = "+Sent"
set send_charset = "us-ascii:utf-8"

# mailboxes
mailboxes +INBOX \
          +Archive \
          +Sent \
          +Drafts \
          +Notes \
          +Junk \
          +Trash

# auto alias
set display_filter = ~/.dotfiles/neomutt/.config/neomutt/auto_add_alias.sh
source ~/Nextcloud/aliases.txt

# trash handling
folder-hook . set trash = +Trash
folder-hook trash$ unset trash

# sort/threading
set sort = threads
set sort_aux = reverse-last-date-received
set sort_re

# look and feel
set pager_index_lines = 8
set pager_context = 5
set pager_stop
set menu_scroll
set smart_wrap
set tilde
unset markers
set text_flowed = yes

# html mails
auto_view text/html
alternative_order text/plain text/encriched text/html

# sidebar
set sidebar_visible
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats
set sidebar_width = 20
set sidebar_divider_char = 'â”‚'
bind index,pager B sidebar-toggle-visible
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open

# composing
set fcc_attach
unset mime_forward
set forward_format = "Fwd: %s"
set include
set forward_quote
set signature = ~/.config/neomutt/signature

ignore * # first, ignore all headers
unignore from: to: cc: bcc: reply-to: date: subject: # then, show only these
hdr_order from: to: cc: bcc: reply-to: date: subject: # and in this order

# colors
source ~/.config/neomutt/colors

# key bindings
macro index S \
  "<save-message>+Junk<enter>" \
  "mark message as spam"
macro index A \
  "<save-message>+Archive<enter>" \
  "archive message"
macro index O \
  "<shell-escape>$HOME/.dotfiles/offlineimap/mailrun.sh<enter>" \
  "sync all mail"
