# mail type
set mbox_type = Maildir
set sendmail = "/usr/local/bin/msmtp"

# account options
set my_user = iam@chrisdeluca.me
set from = $my_user
set realname = "Chris DeLuca"
set mail_check = 0
set envelope_from
unset move
set delete
unset confirmappend
set quit
set header_cache = ~/.cache/neomutt

# folders
set folder = ~/Mail
set spoolfile = "+INBOX"
set mbox = "+Archive"
set postponed = "+Drafts"
set record = "+Sent"
set send_charset = "us-ascii:utf-8"

# mailboxes
mailboxes +INBOX \
          +Archive \
          +Sent \
          +Drafts \
          +Notes \
          +Junk \
          +Trash

# notmuch indexer
# set nm_default_uri = "notmuch:///Users/chris/Mail"
# virtual-mailboxes "My INBOX" "notmuch://?query=tag:inbox"

# auto alias
set display_filter = ~/.dotfiles/neomutt/.config/neomutt/auto_add_alias.sh
source ~/Dropbox/aliases.txt

# trash handling
folder-hook . set trash = +Trash
folder-hook trash$ unset trash

# sort/threading
set sort = threads
set sort_aux = reverse-last-date-received
set sort_re

# look and feel
set pager_index_lines = 8
set pager_context = 5
set pager_stop
set menu_scroll
set smart_wrap
set tilde
unset markers
set text_flowed = yes

# notification for new mails
# set new_mail_command = "terminal-notifier -title 'You\'ve got mail' \
#    -message '%n new messages, %u unread.' -activate 'com.apple.Terminal'"

# html mails
auto_view text/html
alternative_order text/plain text/encriched text/html

# sidebar
# set sidebar_visible
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats
set sidebar_width = 20
set sidebar_divider_char = 'â”‚'
bind index,pager B sidebar-toggle-visible
bind index,pager \CP sidebar-prev
bind index,pager \CN sidebar-next
bind index,pager \CO sidebar-open

# composing
set fcc_attach
unset mime_forward
set forward_format = "Fwd: %s"
set include
set forward_quote
set signature = ~/.config/neomutt/signature

ignore * # first, ignore all headers
unignore from: to: cc: bcc: reply-to: date: subject: # then, show only these
hdr_order from: to: cc: bcc: reply-to: date: subject: # and in this order

# pgp
source ~/.config/neomutt/gpg.rc
set pgp_use_gpg_agent = yes
set pgp_timeout = 3600
set crypt_autosign = no
set crypt_replyencrypt = yes

# colors
source ~/.config/neomutt/colors

# pager
macro index,pager \cb "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"
macro attach,compose \cb "<pipe-entry> urlscan<Enter>" "call urlscan to extract URLs out of a message"

# key bindings
macro index,pager S \
  "<save-message>+Junk<enter>" \
  "mark message as spam"
macro index,pager A \
  "<save-message>+Archive<enter>" \
  "archive message"
macro index,pager O \
  "<shell-escape>$HOME/.dotfiles/mailsync.sh<enter>" \
  "sync all mail"

# vim: ft=muttrc
